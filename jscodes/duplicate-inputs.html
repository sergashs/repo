<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<div duplicate-input-video="">
		<input class="form-control valid" id="GalleryVideo_6_" name="GalleryVideo[6]" type="text" value="https://www.youtube.com/embed/j5-yKhDd64s" aria-invalid="false">
		<span class="field-validation-valid text-danger" data-valmsg-for="GalleryVideo[6]" data-valmsg-replace="true"></span>
	</div>
	<div class="btns-holder">
		<button type="button" class="btn-handle add" add-duplicated-input="duplicate-input-video">Add</button>
		<button type="button" class="btn-handle delete" delete-duplicated-input="duplicate-input-video">Delete</button>
	</div>
	<script>
		function duplicateInputs(attribute, changedAttribute) {
			const btnAdd = document.querySelector(`[add-duplicated-input="${attribute}"]`);
			const btnDelete = document.querySelector(`[delete-duplicated-input="${attribute}"]`);
			const duplicatedElements = document.querySelectorAll(`[${attribute}]`);


			btnAdd.addEventListener('click', () => {
				const originalBlock = document.querySelectorAll(`[${attribute}]`);
				const length = originalBlock.length - 1;
				const clonedBlock = originalBlock[length].cloneNode(true);

				const inputElement = clonedBlock.querySelector('.form-control');
				const errorBlock = clonedBlock.querySelector('.field-validation-valid');
				const attributeName = inputElement.getAttribute('name');
				const attributeNameValue = attributeName.split('[')[1].split(']')[0];
				const newValue = parseInt(attributeNameValue) + 1;
				inputElement.setAttribute('name', `${changedAttribute}[${newValue}]`);
				inputElement.setAttribute('id', `${changedAttribute}_${newValue}_`);
				errorBlock.setAttribute('data-valmsg-for', `${changedAttribute}[${newValue}]`);

				inputElement.value = '';

				originalBlock[length].parentNode.insertBefore(clonedBlock, originalBlock[length].nextSibling);
			});

			btnDelete.addEventListener('click', function () {
				removeBlock();
			});


			function removeBlock() {
				const originalBlocks = document.querySelectorAll(`[${attribute}]`);
				const length = originalBlocks.length - 1;

				if (length > 0) {
					const blockToRemove = originalBlocks[length];
					blockToRemove.parentNode.removeChild(blockToRemove);
				}
			}
		}

		// duplicateEmailInputs('duplicate-input-email', 'DirectApplyAdditionalEmails');
		duplicateInputs('duplicate-input-video', 'GalleryVideo');


	</script>
</body>

</html>