import"../styles/index.scss";import{gsap}from"gsap";import{ScrollTrigger}from"gsap/ScrollTrigger";import{ScrollToPlugin}from"gsap/ScrollToPlugin";gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(ScrollToPlugin);const isTouchScreen=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i);function homeGsapAnimations(){const e=gsap.timeline();window.innerWidth>1200?(e.fromTo(document.querySelector(".section-intro .section-title"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .btn-outline-primary"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .list-logos"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .count-block"),{opacity:0,scale:0},{opacity:1,scale:1,autoAlpha:1})):(e.fromTo(document.querySelector(".section-intro .count-block"),{opacity:0,scale:0},{opacity:1,scale:1,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .section-title"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .btn-outline-primary"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1}),e.fromTo(document.querySelector(".section-intro .list-logos"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1})),gsap.fromTo(document.querySelectorAll(".animation-appear-y"),{opacity:0,y:-20},{opacity:1,y:0,autoAlpha:1,stagger:.25,scrollTrigger:{trigger:document.querySelectorAll(".animation-appear-y"),start:"top 75%"}})}function getModal(){const e=document.querySelectorAll(".open-popup");e&&e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{const e=new XMLHttpRequest;e.open("GET","https://jsonplaceholder.typicode.com/todos/1",!0),e.onload=function(){200==e.status?document.getElementById("modalContainer").innerHTML=`<div class="modal"><div class="container">${e.responseText}</div></div>`:console.error("Помилка Ajax-запиту: "+e.status)},e.onerror=function(){console.error("Помилка Ajax-запиту")},e.send()}))}))}function headerScroll(){const e=document.querySelector(".header");window.addEventListener("scroll",(function(){window.scrollY>0?e.classList.add("scrolled"):e.classList.remove("scrolled")}))}function fullscreenMenu(){const e=document.querySelectorAll(".menu-fullscreen .has-submenu .has-submenu-link"),o=document.querySelectorAll(".menu-fullscreen .has-submenu .sub-menu-close"),t=document.querySelectorAll(".btn-menu-toggle");if(e){function n(){e.forEach((e=>{e.parentNode.classList.remove("active")}))}e&&(e.forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.contains("active")?n():(n(),e.parentNode.classList.add("active"))}))})),o.forEach((e=>{e.addEventListener("click",(()=>{n()}))})))}const r=gsap.timeline({paused:!0});r.to(".menu-fullscreen",{y:0}),window.innerWidth>992?r.fromTo(document.querySelectorAll(".menu-animate-block"),{opacity:0,height:0},{opacity:1,height:"50vh",stagger:.15}):r.fromTo(document.querySelectorAll(".menu-animate-block"),{opacity:0,y:20},{opacity:1,y:0,stagger:.15}),r.fromTo(document.querySelectorAll(".menu-fullscreen-primary"),{opacity:0},{opacity:1,stagger:.15}),r.fromTo(".menu-social",{opacity:0},{opacity:1}),r.eventCallback("onReverseComplete",(()=>{document.body.classList.remove("menu-opened"),document.querySelector(".header .logo-holder img").setAttribute("src","images/logo.svg")})),r.reverse(),t.forEach((e=>{e.addEventListener("click",(()=>{document.body.classList.contains("menu-opened")?r.reverse():(r.reversed(!r.reversed()),document.querySelector(".header .logo-holder img").setAttribute("src","images/logo_white.svg"),document.body.classList.add("menu-opened"))}))}))}function correctVh(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}function gsapReviewCursors(){const e=document.querySelectorAll(".section-categories .review-overlay");window.innerWidth>1200&&!isTouchScreen&&e&&e.length>0&&e.forEach((e=>{e.addEventListener("mousemove",(o=>{const t=e.getBoundingClientRect(),n=o.clientX-t.left,r=o.clientY-t.top;gsap.to(e.querySelector(".review-icon"),{x:n-e.clientWidth/2,y:r-e.clientHeight/2,duration:1.25})})),e.addEventListener("mouseleave",(function(){var e=this.querySelector(".review-icon");gsap.to(e,{x:0,y:0,duration:1.25})}))}))}function scrollSection(){const e=document.querySelectorAll(".scroll-section");e&&e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{gsap.to(window,{duration:0,scrollTo:{y:e.parentNode.parentNode.scrollHeight}})}))}))}document.addEventListener("DOMContentLoaded",(()=>{correctVh(),gsapReviewCursors(),scrollSection(),fullscreenMenu(),headerScroll(),getModal(),homeGsapAnimations()})),window.addEventListener("resize",(()=>{correctVh(),gsapReviewCursors()}));