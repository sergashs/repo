"use strict";
$(document).ready(function () {
	var e, s;
	$(".js-first").each(function (e) {
		var s = $(window),
			i = $(this).find(".js-slider-first");
		s.on("load resize", function () {
			s.width() > 760
				? i.not(".slick-initialized").slick({ initialSlide: 0, slidesToShow: 1, slidesToScroll: 1, arrows: !1, fade: !0, autoplay: !0, autoplaySpeed: 3e3, cssEase: "cubic-bezier(0.77, 0, 0.18, 1)" })
				: i.hasClass("slick-initialized") && i.slick("unslick");
		});
	}),
		(e = $(".js-slider-studio"))
			.on("init", function (e, s, i) {
				var t = $(s.$slides[s.currentSlide]),
					o = t.next(),
					n = t.prev();
				n.addClass("slick-sprev"), o.addClass("slick-snext"), t.removeClass("slick-snext").removeClass("slick-sprev"), (s.$prev = n), (s.$next = o);
			})
			.on("beforeChange", function (e, s, i, t) {
				console.log("beforeChange");
				var o = $(s.$slides[t]);
				console.log(s.$prev, s.$next), s.$prev.removeClass("slick-sprev"), s.$next.removeClass("slick-snext");
				var n = o.next(),
					a = o.prev();
				a.addClass("slick-sprev"), n.addClass("slick-snext"), (s.$prev = a), (s.$next = n), o.removeClass("slick-next").removeClass("slick-sprev");
			}),
		e.slick({
			speed: 1e3,
			arrows: !0,
			dots: !1,
			focusOnSelect: !0,
			infinite: !0,
			centerMode: !0,
			slidesPerRow: 1,
			slidesToShow: 1,
			slidesToScroll: 1,
			centerPadding: "0",
			swipe: !0,
			customPaging: function (e, s) {
				return "";
			},
		}),
		$(".js-slider-reviews").each(function (e) {
			var s = $(this),
				i = s.find(".js-slider-items"),
				t = s.find(".js-slider-nav");
			i.slick({ centerMode: !1, slidesToShow: 1, slidesToScroll: 1, adaptiveHeight: !0, infinite: !0, fade: !0, dots: !1, prevArrow: $(s.find(".js-slider-prev")), nextArrow: $(s.find(".js-slider-next")), asNavFor: t }),
				t.slick({ dots: !0, vertical: !0, verticalSwiping: !0, slidesToShow: 2, slidesToScroll: 1, arrows: !1, asNavFor: i });
		}),
		(function () {
			$(".js-accordion");
			$(".js-accordion-link").click(function (e) {
				var s = $(this).closest("li").find("div"),
					i = $(this).closest("li");
				i.closest(".js-accordion").find("div").not(s).slideUp(),
					i.hasClass("active") ? i.removeClass("active") : (i.closest(".js-accordion").find(".active").removeClass("active"), i.addClass("active")),
					s.stop(!1, !0).slideToggle(),
					e.preventDefault();
			});
		})(),
		(function () {
			var e = $(".js-menu");
			$(".js-burger").on("click", function () {
				var s;
				(s = window.innerWidth - $(window).width()),
					e.toggleClass("is-active"),
					e.hasClass("is-active")
						? (e.removeClass("--up").addClass("--down"), $("body").addClass("open-menu"), s > 0 && $("body").css({ "margin-right": s }))
						: (e.removeClass("--down").addClass("--up"), $("body").removeClass("open-menu"), $("body").css({ "margin-right": 0 }));
			});
		})(),
		(s = document.body),
		document.querySelector(".overlay"),
		[].slice.call(document.querySelectorAll(".js-modal-open")).forEach(function (e, i) {
			var t = document.querySelector("#" + e.getAttribute("data-modal"));
			function o(e) {
				t.classList.remove("popup-show"), (s.style.overflow = "");
			}
			function n(e) {
				var s = e.target;
				t === s && o();
			}
			(close = t.querySelector(".b-popup__close")),
				e.addEventListener("click", function (e) {
					t.classList.add("popup-show"), (s.style.overflow = "hidden"), t.removeEventListener("click", n), t.addEventListener("click", n);
				}),
				close.addEventListener("click", function (e) {
					e.stopPropagation(), o();
				});
		}),
		(function () {
			function e(e) {
				var s = 0,
					i = "",
					t = 0,
					o = 0,
					n = 1,
					a = 1,
					l = 0;
				return (
					$(".js-calc")
						.find('input[type="radio"]:checked')
						.each(function () {
							(i = $(this).attr("name")), (l = Number($(this).val())), "expirience" == i && (t = l), "english" == i && (o = l), "smen" == i && (n = l), "hours" == i && (a = l);
						}),
					(s = ((0.8 * (t + 1 + (o + 1)) * (2e3 * n) * 4) / 5) * a),
					(s = new Intl.NumberFormat("ru-RU").format(s.toFixed())) + " в‚Ѕ<sup>*</sup>"
				);
			}
			!(function () {
				var s = $(".js-calc"),
					i = s.find('input[type="radio"]'),
					t = s.find("select"),
					o = $(".js-calc-price");
				o.html(e()),
					$(i).change(function (s) {
						var i = $(s.target);
						t.filter('[name="' + i.attr("name") + '"]').val(i.val()), o.html(e());
					}),
					$(t).change(function () {
						i.filter('[name="'.concat($(this).attr("name"), '"][value="').concat($(this).val(), '"]')).prop("checked", !0), o.html(e());
					});
			})();
		})(),
		(function () {
			var e = document.body,
				s = document.querySelector(".overlay");
			function i() {
				$(".b-popup").removeClass("popup-show"), (e.style.overflow = "");
			}
			function t(t) {
				var o = document.querySelector("#" + t),
					n = o.querySelector(".b-popup__close");
				o.classList.add("popup-show"),
					(e.style.overflow = "hidden"),
					n.addEventListener("click", function (e) {
						e.stopPropagation(), i();
					}),
					s.removeEventListener("click", i),
					s.addEventListener("click", i);
			}
			$(e).on("submit", ".js-form", function (e) {
				e.preventDefault();
				var s = $(this);
				$.ajax({
					url: "/ajax/send.php",
					type: "post",
					dataType: "json",
					data: s.serialize(),
					success: function (e) {
						e.status ? (i(), t("modal-thanks"), ym(53336824, "reachGoal", "Form1-Success"), s[0].reset()) : (i(), t("modal-thanks"));
					},
				});
			});
		})(),
		$('input[type="tel"]').inputmask("+7 (999) 999-99-99"),
		$(".js-slider-variable").each(function (e) {
			var s = { draggable: !0, accessibility: !1, variableWidth: !0, slidesToShow: 1, arrows: !1, dots: !1, swipeToSlide: !0, infinite: !1 },
				i = $(window),
				t = $(this),
				o = t.find(".js-slider-items"),
				n = t.data("adp");
			n || (n = i.width() + 10),
				o.not(".slick-initialized").slick(s),
				i.on("load resize", function () {
					i.width() < n ? o.not(".slick-initialized").slick(s) : o.hasClass("slick-initialized") && o.slick("unslick");
				});
		});
	//$('[data-fancybox="images"]').fancybox({ hash: !1, buttons: ["close"], thumbs: { autoStart: !1 } });
});
